<!-- view-appointment.component.html -->

<!-- Status Filter -->
<div class="container mt-3">
    <div class="form-group">
      <label for="status"><strong>Filter by Status:</strong></label>
      <select id="status" [(ngModel)]="selectedStatus" class="form-control" (change)="onStatusChange()">
        <option value="">-- All Statuses --</option>
        <option value="Pending">Pending</option>
        <option value="Accepted">Accepted</option>
        <option value="Declined">Declined</option>
      </select>
    </div>
  </div>
  
  <!-- Display Appointment Details -->
  <div *ngIf="appointments && appointments.length > 0" class="container mt-3">
    <div *ngFor="let appointment of appointments" class="card mt-3">
      <div class="card-body">
        <h5 class="card-title">Appointment ID: {{ appointment.appId }}</h5>
        <p class="card-text">
          <strong>Doctor Name:</strong> {{ appointment.doctor.name }}
        </p>
        <p class="card-text">
          <strong>Patient Name:</strong> {{ appointment.patient.patientName }}
        </p>
        <p class="card-text">
          <strong>Date:</strong> {{ appointment.date | date: 'mediumDate' }}
        </p>
        <p class="card-text">
          <strong>Time:</strong> {{ appointment.time }}
        </p>
        <p class="card-text">
          <strong>Status:</strong> {{ appointment.status }}
        </p>
  
        <!-- Accept and Decline Buttons for Pending Appointments -->
        <div *ngIf="appointment.status === 'Pending'" class="mt-3">
          <button class="btn btn-success mr-2" (click)="acceptAppointment(appointment.appId)">
            Accept
          </button>
          <button class="btn btn-danger" (click)="declineAppointment(appointment.appId)">
            Decline
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- No Appointments Found Message -->
  <div *ngIf="appointments && appointments.length === 0 && searched" class="container mt-3">
    <p class="no-appointments">No appointments found.</p>
  </div>
  
  <router-outlet></router-outlet>
  