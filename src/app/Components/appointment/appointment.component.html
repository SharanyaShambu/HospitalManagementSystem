<app-navbar></app-navbar>

<div class="container my-5">
  <div class="card shadow-sm">
    <div class="card-body">
      <div class="row align-items-center">
        <div class="col-md-8 mb-3 mb-md-0">
          <select [(ngModel)]="specialization" class="form-control form-select">
            <option value="" disabled selected>Select Specialization</option>
            <option value="Cardiologist">Cardiologist</option>
            <option value="Physiologist">Physiologist</option>
            <option value="Pulmonologist">Pulmonologist</option>
            <option value="ENT">ENT</option>
            <option value="Neurologist">Neurologist</option>
            <option value="General Physician">General Physician</option>
            <option value="Dentist">Dentist</option>
            <option value="Gynecologist">Gynecologist</option>
            <option value="Orthopedic">Orthopedic</option>
            <option value="Pediatrician">Pediatrician</option>
            <option value="Dermatologist">Dermatologist</option>
            <option value="Urologist">Urologist</option>
          </select>
        </div>
        <div class="col-md-4">
          <button class="btn btn-primary w-100" (click)="searchDoctors()">Search</button>
        </div>
      </div>

      <!-- Display error message if exists -->
      <div *ngIf="errorMessage" class="mt-3">
        <p class="alert alert-danger p-2">{{ errorMessage }}</p>
      </div>
    </div>
  </div>

  <!-- Display the list of doctors if any are found -->
  <div *ngIf="doctors.length > 0" class="row mt-4">
    <div *ngFor="let doctor of doctors" class="col-md-4">
      <div class="card mb-3 shadow-sm">
        <div class="card-body">
          <h5 class="card-title">Dr. {{ doctor.name }}</h5>
          <p class="card-text"><strong>Specialization:</strong> {{ doctor.specialization }}</p>
          <p class="card-text"><strong>Email:</strong> {{ doctor.emailId }}</p>
          <p class="card-text"><strong>Phone:</strong> {{ doctor.mobile_number }}</p>
          <button class="btn btn-outline-primary btn-sm" (click)="navigateToBookAppointment(doctor.doctorId)">
            Book Appointment
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Display "no results" message if search was done, there's no error, and the doctors list is empty -->
  <div *ngIf="!errorMessage && searched && doctors.length === 0" class="mt-4">
    <p class="alert alert-info text-center">
      No doctors found for specialization "{{ specialization }}".
    </p>
  </div>
</div>

<router-outlet></router-outlet>
